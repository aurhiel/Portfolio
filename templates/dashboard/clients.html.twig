{% extends 'dashboard/components/base.html.twig' %}

{% block body %}
  <div class="container">
    <h2 class="h3 mb-3">Ajouter un client</h2>
    {{ form_start(form, { 'attr' : { 'class': 'form form-client' } }) }}
      {# Form inputs #}
      <div class="form--inputs">
        <div class="form-row">
          <div class="col-3 col-md-2 col-lg-1 mb-3">
            {{ form_label(form.color) }}
            <span class="custom-color">{{ form_widget(form.color) }}</span>
            {{ form_errors(form.color) }}
          </div>
          <div class="col-9 col-md-10 col-lg-11 mb-3">
            {{ form_label(form.company) }}
            {{ form_widget(form.company) }}
            {{ form_errors(form.company) }}
          </div>
        </div>

        <div class="form-row">
          <div class="col-sm-6 col-md-4 mb-3">
            {{ form_label(form.lastname) }}
            {{ form_widget(form.lastname) }}
            {{ form_errors(form.lastname) }}
          </div>
          <div class="col-sm-6 col-md-4 mb-3">
            {{ form_label(form.firstname) }}
            {{ form_widget(form.firstname) }}
            {{ form_errors(form.firstname) }}
          </div>
          <div class="col-sm-12 col-md-4">
            {{ form_label(form.email) }}
            {{ form_widget(form.email) }}
            {{ form_errors(form.email) }}
          </div>
        </div>

        <div class="form-group">
        </div>
      </div>

      {# Form buttons #}
      <div class="form--actions text-center">
        {{ form_widget(form.send) }}
      </div>
    {{ form_end(form) }}

    <hr class="w-50 mx-auto my-5">

    <h2 class="h3 mb-3">Liste des clients</h2>
    {% if clients is defined and clients is not empty %}
      <div class="table-responsive table-bordered">
        <table class="table table-striped mb-0">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Société</th>
              <th scope="col">Nom</th>
              <th scope="col">Prénom</th>
              <th scope="col">Email</th>
              <th scope="col">Témoignage</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
          {% for client in clients %}
            <tr>
              <td class="col-id">{{ client.id }}</td>
              <td class="col-company" {% if client.color is not empty %} style="color: {{ client.color }}"{% endif %}>
                <span class="dot"></span> {{ client.company }}
              </td>
              <td class="col-lastname">{{ client.lastname }}</td>
              <td class="col-firstname">{{ client.firstname }}</td>
              <td class="col-email">{{ client.email }}</td>
              <td class="col-testimonial">
                {% if client.testimonial is not null and client.testimonial.token is not null %}
                  <a href="{{ path('golden_book', { token: client.testimonial.token }) }}" target="_blank">
                    {{ client.testimonial.token }}
                  </a>
                {% else %}
                  -
                {% endif %}
              </td>
              <td class="col-actions">
                <a class="btn btn-sm btn-secondary"
                  href="{{ path('dashboard_clients', { id: client.id }) }}">
                  edit
                </a>
                <a class="btn btn-sm btn-danger"
                  href="{{ path('dashboard_clients_delete', { id: client.id }) }}">
                  del.
                </a>
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="alert alert-secondary">Aucun client</div>
    {% endif %}
  </div>
{% endblock %}
