{% extends 'dashboard/components/base.html.twig' %}

{% block body %}
  <div class="container">
    <h2 class="h4 mb-3">Ajouter un client</h2>
    {{ form_start(form, { 'attr' : { 'class': 'form form-client' } }) }}
      {# Form inputs #}
      <div class="form--inputs">
        <div class="form-group">
          {{ form_label(form.company) }}
          {{ form_widget(form.company) }}
          {{ form_errors(form.company) }}
        </div>

        <div class="form-row">
          <div class="col-sm-6 mb-3">
            {{ form_label(form.lastname) }}
            {{ form_widget(form.lastname) }}
            {{ form_errors(form.lastname) }}
          </div>
          <div class="col-sm-6 mb-3">
            {{ form_label(form.firstname) }}
            {{ form_widget(form.firstname) }}
            {{ form_errors(form.firstname) }}
          </div>
        </div>

        <div class="form-group">
          {{ form_label(form.email) }}
          {{ form_widget(form.email) }}
          {{ form_errors(form.email) }}
        </div>
      </div>

      {# Form buttons #}
      <div class="form--actions text-center">
        {{ form_widget(form.send) }}
      </div>
    {{ form_end(form) }}

    <hr class="w-50 mx-auto my-5">

    <h2 class="h4 mb-3">Liste des clients</h2>
    {% if clients is defined and clients is not empty %}
      <div class="table-responsive table-bordered">
        <table class="table table-striped mb-0">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Société</th>
              <th scope="col">Nom</th>
              <th scope="col">Prénom</th>
              <th scope="col">Email</th>
              <th scope="col">Témoignage</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
          {% for client in clients %}
            <tr>
              <td>{{ client.id }}</td>
              <td>{{ client.company }}</td>
              <td>{{ client.lastname }}</td>
              <td>{{ client.firstname }}</td>
              <td>{{ client.email }}</td>
              <td>
                {% if client.testimonial is not null %}
                  <a href="{{ path('golden_book', { token: client.testimonial.token }) }}" target="_blank">
                    {{ client.testimonial.token }}
                  </a>
                {% else %}
                  -
                {% endif %}
              </td>
              <td>
                <a class="btn btn-sm btn-danger"
                  href="{{ path('dashboard_clients_delete', { id: client.id }) }}">
                  del.
                </a>
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="alert alert-secondary">Aucun client</div>
    {% endif %}
  </div>
{% endblock %}
